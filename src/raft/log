Round 1
Test passed

Round 2
Test passed

Round 3
Test passed

Round 4
Test failed

=== RUN   TestCount3B
Test (3B): RPC counts aren't too high ...
node 2 duration 1.120555657s
node 2 start leader election
node 0 get request vote from 2
node 0 grant request vote from 2 term 1
node 1 get request vote from 2
node 1 grant request vote from 2 term 1
node 2 request vote RPC to 0:true
node 2 get 2
leader 2 broadcast heartbeat 1
leader 2 append log index -1 commit -1 to server 1 PrevLogIndex -1
node 2 request vote RPC to 1:true
leader 2 append log index -1 commit -1 to server 0 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 0
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 0
leader 2 append log index -1 to server 0 success
leader 2 append log index -1 to server 1 success
leader 2 broadcast heartbeat 2
leader 2 append log index -1 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index -1 commit -1 to server 1 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 0
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 0
leader 2 append log index -1 to server 1 success
leader 2 append log index -1 to server 0 success
leader 2 broadcast heartbeat 3
leader 2 append log index -1 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index -1 commit -1 to server 1 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 0
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 0
leader 2 append log index -1 to server 0 success
leader 2 append log index -1 to server 1 success
leader 2 append entry 1 command 1
leader 2 append entry 2 command 176538563
leader 2 append entry 3 command 1402158078
leader 2 append entry 4 command 1601749336
leader 2 append entry 5 command 152539191
leader 2 append entry 6 command 1730226522
leader 2 append entry 7 command 5217767
leader 2 append entry 8 command 425453824
leader 2 append entry 9 command 1787123098
leader 2 append log index 5 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index 3 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 1 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index 0 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 5 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 2 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 2 commit -1 to server 0 PrevLogIndex -1
leader 2 append entry 10 command 1682274662
leader 2 append log index 0 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index 6 commit -1 to server 0 PrevLogIndex -1
leader 2 append log index 6 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 3 commit -1 to server 0 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 6
leader 2 append log index 7 commit -1 to server 0 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 3
leader 2 append log index 4 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 1 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 7 commit -1 to server 1 PrevLogIndex -1
leader 2 append log index 2 to server 0 success
leader 2 commit log 1 command 1
leader 2 commit log 2 command 176538563
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 4
leader 2 commit log 3 command 1402158078
leader 2 append entry 11 command 776886570
leader 2 append entry 12 command 1296524204
leader 2 append log index 11 commit 2 to server 1 PrevLogIndex -1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 7
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 8
leader 2 append log index 7 to server 0 success
leader 2 commit log 4 command 1601749336
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 4
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 2
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 8
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 5
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 7
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 3
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 1
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 6
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index -1 prev index -1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 2
leader 2 commit log 5 command 152539191
leader 2 commit log 6 command 1730226522
leader 2 commit log 7 command 5217767
leader 2 commit log 8 command 425453824
leader 2 append log index 5 to server 0 success
leader 2 append log index 0 to server 0 success
leader 2 append log index 8 commit 7 to server 1 PrevLogIndex -1
node 1 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 2 prev index -1
leader 2 append log index 1 to server 0 success
node 1 get valid append entry from 2
leader 2 append log index 9 commit 7 to server 0 PrevLogIndex 7
node 1 commit index 0 log {1 1}
leader 2 append log index 7 to server 1 success
leader 2 append log index 10 commit 7 to server 0 PrevLogIndex 7
node 1 commit index 1 log {176538563 1}
leader 2 append log index 11 commit 7 to server 0 PrevLogIndex 7
node 1 commit index 2 log {1402158078 1}
leader 2 append log index 10 commit 7 to server 1 PrevLogIndex 7
node 1 grant append rpc from 2 log length 12
leader 2 append log index 4 to server 1 success
leader 2 append log index 3 to server 0 success
leader 2 append log index 0 to server 1 success
leader 2 append log index 3 to server 1 success
leader 2 append log index 2 to server 1 success
leader 2 append log index 1 to server 1 success
leader 2 append log index 6 to server 1 success
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 7 prev index 7
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 7
node 1 get append entry from 2 current term 1 arg term 1 rf commit 2 commit index 7 prev index -1
node 1 get valid append entry from 2
node 1 commit index 3 log {1601749336 1}
node 1 commit index 4 log {152539191 1}
node 1 commit index 5 log {1730226522 1}
node 1 commit index 6 log {5217767 1}
node 1 commit index 7 log {425453824 1}
node 1 grant append rpc from 2 log length 9
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 7 prev index 7
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 7
leader 2 append log index 5 to server 1 success
leader 2 append log index 8 commit 7 to server 0 PrevLogIndex 6
leader 2 append log index 9 commit 7 to server 1 PrevLogIndex 7
leader 2 append log index 8 to server 1 success
leader 2 commit log 9 command 1787123098
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 7 prev index 7
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 7
leader 2 append log index 11 to server 1 success
leader 2 commit log 10 command 1682274662
leader 2 commit log 11 command 776886570
leader 2 commit log 12 command 1296524204
leader 2 append log index 6 to server 0 success
node 1 get append entry from 2 current term 1 arg term 1 rf commit 7 commit index 7 prev index 7
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 10
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 7 prev index 6
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 6
node 1 get append entry from 2 current term 1 arg term 1 rf commit 7 commit index 7 prev index 7
node 1 get valid append entry from 2
node 1 grant append rpc from 2 log length 11
leader 2 append log index 9 to server 1 success
leader 2 append log index 10 to server 1 success
leader 2 append log index 9 commit 11 to server 0 PrevLogIndex 5
leader 2 append log index 10 commit 11 to server 0 PrevLogIndex 5
leader 2 append log index 11 commit 11 to server 0 PrevLogIndex 5
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 5
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 5
leader 2 append log index 8 commit 11 to server 0 PrevLogIndex 5
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 5
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 5
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 5
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 5
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 5
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 5
leader 2 append log index 9 commit 11 to server 0 PrevLogIndex 4
leader 2 append log index 10 commit 11 to server 0 PrevLogIndex 4
leader 2 append log index 11 commit 11 to server 0 PrevLogIndex 4
leader 2 append log index 8 commit 11 to server 0 PrevLogIndex 4
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 4
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 4
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 4
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 4
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 4
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 4
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 4
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 4
leader 2 append log index 11 commit 11 to server 0 PrevLogIndex 3
leader 2 append log index 9 commit 11 to server 0 PrevLogIndex 3
leader 2 append log index 8 commit 11 to server 0 PrevLogIndex 3
leader 2 append log index 10 commit 11 to server 0 PrevLogIndex 3
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 3
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 3
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 3
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 3
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 3
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 3
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 3
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 3
leader 2 broadcast heartbeat 4
leader 2 append log index -1 commit 11 to server 1 PrevLogIndex 11
leader 2 heartbeat to server 0 blocked
node 1 get append entry from 2 current term 1 arg term 1 rf commit 7 commit index 11 prev index 11
node 1 get valid append entry from 2
node 1 reject append entry from 2 log length 11 PrevLogIndex 11
leader 2 append log index 11 commit 11 to server 0 PrevLogIndex 2
leader 2 append log index 10 commit 11 to server 0 PrevLogIndex 2
leader 2 append log index 9 commit 11 to server 0 PrevLogIndex 2
leader 2 append log index 8 commit 11 to server 0 PrevLogIndex 2
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 2
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 2
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 2
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 2
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 2
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 2
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 2
node 0 get valid append entry from 2
node 0 reject append entry from 2 log length 2 PrevLogIndex 2
leader 2 append log index -1 commit 11 to server 1 PrevLogIndex 10
node 1 get append entry from 2 current term 1 arg term 1 rf commit 7 commit index 11 prev index 10
node 1 get valid append entry from 2
node 1 commit index 8 log {1787123098 1}
node 1 commit index 9 log {1682274662 1}
node 1 commit index 10 log {776886570 1}
node 1 commit index 11 log {1296524204 1}
node 1 grant append rpc from 2 log length 12
leader 2 append log index -1 to server 1 success
leader 2 append log index 8 commit 11 to server 0 PrevLogIndex 1
leader 2 append log index 11 commit 11 to server 0 PrevLogIndex 1
leader 2 append log index 9 commit 11 to server 0 PrevLogIndex 1
leader 2 append log index 10 commit 11 to server 0 PrevLogIndex 1
node 0 get append entry from 2 current term 1 arg term 1 rf commit -1 commit index 11 prev index 1
node 0 get valid append entry from 2
node 0 commit index 0 log {1 1}
node 0 commit index 1 log {176538563 1}
node 0 commit index 2 log {1402158078 1}
node 0 commit index 3 log {1601749336 1}
node 0 commit index 4 log {152539191 1}
node 0 commit index 5 log {1730226522 1}
node 0 commit index 6 log {5217767 1}
node 0 commit index 7 log {425453824 1}
node 0 commit index 8 log {1787123098 1}
node 0 grant append rpc from 2 log length 9
node 0 get append entry from 2 current term 1 arg term 1 rf commit 8 commit index 11 prev index 1
node 0 get valid append entry from 2
node 0 commit index 9 log {1682274662 1}
node 0 commit index 10 log {776886570 1}
node 0 commit index 11 log {1296524204 1}
node 0 grant append rpc from 2 log length 12
node 0 get append entry from 2 current term 1 arg term 1 rf commit 11 commit index 11 prev index 1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 10
leader 2 append log index 8 to server 0 success
node 0 get append entry from 2 current term 1 arg term 1 rf commit 11 commit index 11 prev index 1
node 0 get valid append entry from 2
node 0 grant append rpc from 2 log length 11
leader 2 append log index 11 to server 0 success
leader 2 append log index 9 to server 0 success
leader 2 append log index 10 to server 0 success
    test_test.go:670: too many RPCs (45) for 10 entries
--- FAIL: TestCount3B (2.06s)
FAIL
exit status 1
FAIL	6.5840/raft	2.068s


